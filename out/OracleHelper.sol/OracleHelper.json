{"abi":[{"type":"function","name":"cachedPrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"cachedPriceTimestamp","inputs":[],"outputs":[{"name":"","type":"uint48","internalType":"uint48"}],"stateMutability":"view"},{"type":"function","name":"updateCachedPrice","inputs":[{"name":"force","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"event","name":"TokenPriceUpdated","inputs":[{"name":"currentPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"previousPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"cachedPriceTimestamp","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"cachedPrice()":"f60fdcb3","cachedPriceTimestamp()":"e1d8153c","updateCachedPrice(bool)":"3ba9290f"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currentPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"cachedPriceTimestamp\",\"type\":\"uint256\"}],\"name\":\"TokenPriceUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"cachedPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cachedPriceTimestamp\",\"outputs\":[{\"internalType\":\"uint48\",\"name\":\"\",\"type\":\"uint48\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"force\",\"type\":\"bool\"}],\"name\":\"updateCachedPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"updateCachedPrice(bool)\":{\"params\":{\"force\":\"true to force cache update, even if called after short time or the change is lower than the update threshold.\"},\"returns\":{\"_0\":\"newPrice the new cached token price\"}}},\"title\":\"Helper functions for dealing with various forms of price feed oracles.\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"cachedPrice()\":{\"notice\":\"The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format\"},\"cachedPriceTimestamp()\":{\"notice\":\"The timestamp of a block when the cached price was updated\"},\"updateCachedPrice(bool)\":{\"notice\":\"Updates the token price by fetching the latest price from the Oracle.\"}},\"notice\":\"Maintains a price cache and updates the current price if needed. In the best case scenario we have a direct oracle from the token to the native asset. Also support tokens that have no direct price oracle to the native asset. Sometimes oracles provide the price in the opposite direction of what we need in the moment.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/samples/utils/OracleHelper.sol\":\"OracleHelper\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/@openzeppelin/\",\":@uniswap/v3-core/=lib/uniswap-v3-core/\",\":@uniswap/v3-periphery/=lib/uniswap/\",\":forge-std/=lib/forge-std/src/\",\":uniswap-v3-core/=lib/uniswap-v3-core/contracts/\",\":uniswap/=lib/uniswap/contracts/\"]},\"sources\":{\"contracts/samples/utils/IOracle.sol\":{\"keccak256\":\"0x73fcbc4b8384d3a3f3786f3991ed11fc917013a6ea212478327e081d01f7da09\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://068319a302037e96e56b6a3f6487f546cbc40af2461db704db5b275013383dd9\",\"dweb:/ipfs/QmcyWiK1avUP9ZxLKTGrfMKK9c88Dj6ccNjWbJthKDvrZz\"]},\"contracts/samples/utils/OracleHelper.sol\":{\"keccak256\":\"0x0f55564a38900f8d70eee92102402fc6b80eb33e326befd7854cdb36a5aadec2\",\"license\":\"GPL-3.0\",\"urls\":[\"bzz-raw://f41c31a093aeedb26d13d7669cc0a18597e2fd0abb9ce8fb8794c52db812ce20\",\"dweb:/ipfs/QmfHPAifhx9SEA7dtc2bGspS8YKj8kZiiePboKV8YkF5Uw\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"currentPrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"previousPrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"cachedPriceTimestamp","type":"uint256","indexed":false}],"type":"event","name":"TokenPriceUpdated","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"cachedPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"cachedPriceTimestamp","outputs":[{"internalType":"uint48","name":"","type":"uint48"}]},{"inputs":[{"internalType":"bool","name":"force","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"updateCachedPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"updateCachedPrice(bool)":{"params":{"force":"true to force cache update, even if called after short time or the change is lower than the update threshold."},"returns":{"_0":"newPrice the new cached token price"}}},"version":1},"userdoc":{"kind":"user","methods":{"cachedPrice()":{"notice":"The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format"},"cachedPriceTimestamp()":{"notice":"The timestamp of a block when the cached price was updated"},"updateCachedPrice(bool)":{"notice":"Updates the token price by fetching the latest price from the Oracle."}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/@openzeppelin/","@uniswap/v3-core/=lib/uniswap-v3-core/","@uniswap/v3-periphery/=lib/uniswap/","forge-std/=lib/forge-std/src/","uniswap-v3-core/=lib/uniswap-v3-core/contracts/","uniswap/=lib/uniswap/contracts/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/samples/utils/OracleHelper.sol":"OracleHelper"},"evmVersion":"paris","libraries":{}},"sources":{"contracts/samples/utils/IOracle.sol":{"keccak256":"0x73fcbc4b8384d3a3f3786f3991ed11fc917013a6ea212478327e081d01f7da09","urls":["bzz-raw://068319a302037e96e56b6a3f6487f546cbc40af2461db704db5b275013383dd9","dweb:/ipfs/QmcyWiK1avUP9ZxLKTGrfMKK9c88Dj6ccNjWbJthKDvrZz"],"license":"MIT"},"contracts/samples/utils/OracleHelper.sol":{"keccak256":"0x0f55564a38900f8d70eee92102402fc6b80eb33e326befd7854cdb36a5aadec2","urls":["bzz-raw://f41c31a093aeedb26d13d7669cc0a18597e2fd0abb9ce8fb8794c52db812ce20","dweb:/ipfs/QmfHPAifhx9SEA7dtc2bGspS8YKj8kZiiePboKV8YkF5Uw"],"license":"GPL-3.0"}},"version":1},"ast":{"absolutePath":"contracts/samples/utils/OracleHelper.sol","id":10059,"exportedSymbols":{"IOracle":[9676],"OracleHelper":[10058]},"nodeType":"SourceUnit","src":"36:8093:41","nodes":[{"id":9678,"nodeType":"PragmaDirective","src":"36:24:41","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":9679,"nodeType":"ImportDirective","src":"102:23:41","nodes":[],"absolutePath":"contracts/samples/utils/IOracle.sol","file":"./IOracle.sol","nameLocation":"-1:-1:-1","scope":10059,"sourceUnit":9677,"symbolAliases":[],"unitAlias":""},{"id":10058,"nodeType":"ContractDefinition","src":"551:7577:41","nodes":[{"id":9688,"nodeType":"EventDefinition","src":"589:99:41","nodes":[],"anonymous":false,"eventSelector":"00d4fe314618b73a96886b87817a53a5ed51433b0234c85a5e9dafe2cb7b8842","name":"TokenPriceUpdated","nameLocation":"595:17:41","parameters":{"id":9687,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9682,"indexed":false,"mutability":"mutable","name":"currentPrice","nameLocation":"621:12:41","nodeType":"VariableDeclaration","scope":9688,"src":"613:20:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9681,"name":"uint256","nodeType":"ElementaryTypeName","src":"613:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9684,"indexed":false,"mutability":"mutable","name":"previousPrice","nameLocation":"643:13:41","nodeType":"VariableDeclaration","scope":9688,"src":"635:21:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9683,"name":"uint256","nodeType":"ElementaryTypeName","src":"635:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9686,"indexed":false,"mutability":"mutable","name":"cachedPriceTimestamp","nameLocation":"666:20:41","nodeType":"VariableDeclaration","scope":9688,"src":"658:28:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9685,"name":"uint256","nodeType":"ElementaryTypeName","src":"658:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"612:75:41"}},{"id":9691,"nodeType":"VariableDeclaration","src":"694:49:41","nodes":[],"constant":true,"mutability":"constant","name":"PRICE_DENOMINATOR","nameLocation":"719:17:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9689,"name":"uint256","nodeType":"ElementaryTypeName","src":"694:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31653236","id":9690,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"739:4:41","typeDescriptions":{"typeIdentifier":"t_rational_100000000000000000000000000_by_1","typeString":"int_const 100000000000000000000000000"},"value":"1e26"},"visibility":"private"},{"id":9718,"nodeType":"StructDefinition","src":"750:1287:41","nodes":[],"canonicalName":"OracleHelper.OracleHelperConfig","members":[{"constant":false,"id":9694,"mutability":"mutable","name":"cacheTimeToLive","nameLocation":"908:15:41","nodeType":"VariableDeclaration","scope":9718,"src":"901:22:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":9693,"name":"uint48","nodeType":"ElementaryTypeName","src":"901:6:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"},{"constant":false,"id":9697,"mutability":"mutable","name":"maxOracleRoundAge","nameLocation":"1014:17:41","nodeType":"VariableDeclaration","scope":9718,"src":"1007:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":9696,"name":"uint48","nodeType":"ElementaryTypeName","src":"1007:6:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"internal"},{"constant":false,"id":9701,"mutability":"mutable","name":"tokenOracle","nameLocation":"1128:11:41","nodeType":"VariableDeclaration","scope":9718,"src":"1120:19:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"},"typeName":{"id":9700,"nodeType":"UserDefinedTypeName","pathNode":{"id":9699,"name":"IOracle","nameLocations":["1120:7:41"],"nodeType":"IdentifierPath","referencedDeclaration":9676,"src":"1120:7:41"},"referencedDeclaration":9676,"src":"1120:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"visibility":"internal"},{"constant":false,"id":9705,"mutability":"mutable","name":"nativeOracle","nameLocation":"1296:12:41","nodeType":"VariableDeclaration","scope":9718,"src":"1288:20:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"},"typeName":{"id":9704,"nodeType":"UserDefinedTypeName","pathNode":{"id":9703,"name":"IOracle","nameLocations":["1288:7:41"],"nodeType":"IdentifierPath","referencedDeclaration":9676,"src":"1288:7:41"},"referencedDeclaration":9676,"src":"1288:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"visibility":"internal"},{"constant":false,"id":9708,"mutability":"mutable","name":"tokenToNativeOracle","nameLocation":"1515:19:41","nodeType":"VariableDeclaration","scope":9718,"src":"1510:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9707,"name":"bool","nodeType":"ElementaryTypeName","src":"1510:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":9711,"mutability":"mutable","name":"tokenOracleReverse","nameLocation":"1689:18:41","nodeType":"VariableDeclaration","scope":9718,"src":"1684:23:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9710,"name":"bool","nodeType":"ElementaryTypeName","src":"1684:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":9714,"mutability":"mutable","name":"nativeOracleReverse","nameLocation":"1847:19:41","nodeType":"VariableDeclaration","scope":9718,"src":"1842:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9713,"name":"bool","nodeType":"ElementaryTypeName","src":"1842:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":9717,"mutability":"mutable","name":"priceUpdateThreshold","nameLocation":"2009:20:41","nodeType":"VariableDeclaration","scope":9718,"src":"2001:28:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9716,"name":"uint256","nodeType":"ElementaryTypeName","src":"2001:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"name":"OracleHelperConfig","nameLocation":"757:18:41","scope":10058,"visibility":"public"},{"id":9721,"nodeType":"VariableDeclaration","src":"2161:26:41","nodes":[],"constant":false,"documentation":{"id":9719,"nodeType":"StructuredDocumentation","src":"2043:113:41","text":"@notice The cached token price from the Oracle, always in (native-asset-per-token) * PRICE_DENOMINATOR format"},"functionSelector":"f60fdcb3","mutability":"mutable","name":"cachedPrice","nameLocation":"2176:11:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9720,"name":"uint256","nodeType":"ElementaryTypeName","src":"2161:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":9724,"nodeType":"VariableDeclaration","src":"2269:34:41","nodes":[],"constant":false,"documentation":{"id":9722,"nodeType":"StructuredDocumentation","src":"2194:70:41","text":"@notice The timestamp of a block when the cached price was updated"},"functionSelector":"e1d8153c","mutability":"mutable","name":"cachedPriceTimestamp","nameLocation":"2283:20:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"},"typeName":{"id":9723,"name":"uint48","nodeType":"ElementaryTypeName","src":"2269:6:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"visibility":"public"},{"id":9727,"nodeType":"VariableDeclaration","src":"2310:45:41","nodes":[],"constant":false,"mutability":"mutable","name":"oracleHelperConfig","nameLocation":"2337:18:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":9726,"nodeType":"UserDefinedTypeName","pathNode":{"id":9725,"name":"OracleHelperConfig","nameLocations":["2310:18:41"],"nodeType":"IdentifierPath","referencedDeclaration":9718,"src":"2310:18:41"},"referencedDeclaration":9718,"src":"2310:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"private"},{"id":9730,"nodeType":"VariableDeclaration","src":"2447:39:41","nodes":[],"constant":false,"documentation":{"id":9728,"nodeType":"StructuredDocumentation","src":"2362:80:41","text":"@notice The \"10^(tokenOracle.decimals)\" value used for the price calculation"},"mutability":"mutable","name":"tokenOracleDecimalPower","nameLocation":"2463:23:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":9729,"name":"uint128","nodeType":"ElementaryTypeName","src":"2447:7:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"private"},{"id":9733,"nodeType":"VariableDeclaration","src":"2579:40:41","nodes":[],"constant":false,"documentation":{"id":9731,"nodeType":"StructuredDocumentation","src":"2493:81:41","text":"@notice The \"10^(nativeOracle.decimals)\" value used for the price calculation"},"mutability":"mutable","name":"nativeOracleDecimalPower","nameLocation":"2595:24:41","scope":10058,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":9732,"name":"uint128","nodeType":"ElementaryTypeName","src":"2579:7:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"private"},{"id":9752,"nodeType":"FunctionDefinition","src":"2626:246:41","nodes":[],"body":{"id":9751,"nodeType":"Block","src":"2700:172:41","nodes":[],"statements":[{"expression":{"id":9745,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9739,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9721,"src":"2710:11:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"arguments":[{"id":9742,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2729:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9741,"name":"uint256","nodeType":"ElementaryTypeName","src":"2729:7:41","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"}],"id":9740,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"2724:4:41","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":9743,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2724:13:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_uint256","typeString":"type(uint256)"}},"id":9744,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2738:3:41","memberName":"max","nodeType":"MemberAccess","src":"2724:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2710:31:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9746,"nodeType":"ExpressionStatement","src":"2710:31:41"},{"expression":{"arguments":[{"id":9748,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9736,"src":"2836:19:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}],"id":9747,"name":"_setOracleConfiguration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9818,"src":"2799:23:41","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_OracleHelperConfig_$9718_memory_ptr_$returns$__$","typeString":"function (struct OracleHelper.OracleHelperConfig memory)"}},"id":9749,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2799:66:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9750,"nodeType":"ExpressionStatement","src":"2799:66:41"}]},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":9737,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9736,"mutability":"mutable","name":"_oracleHelperConfig","nameLocation":"2674:19:41","nodeType":"VariableDeclaration","scope":9752,"src":"2648:45:41","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":9735,"nodeType":"UserDefinedTypeName","pathNode":{"id":9734,"name":"OracleHelperConfig","nameLocations":["2648:18:41"],"nodeType":"IdentifierPath","referencedDeclaration":9718,"src":"2648:18:41"},"referencedDeclaration":9718,"src":"2648:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"internal"}],"src":"2638:61:41"},"returnParameters":{"id":9738,"nodeType":"ParameterList","parameters":[],"src":"2700:0:41"},"scope":10058,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":9818,"nodeType":"FunctionDefinition","src":"2878:698:41","nodes":[],"body":{"id":9817,"nodeType":"Block","src":"2980:596:41","nodes":[],"statements":[{"expression":{"id":9760,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9758,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"2990:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":9759,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9755,"src":"3011:19:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}},"src":"2990:40:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9761,"nodeType":"ExpressionStatement","src":"2990:40:41"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9766,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":9763,"name":"_oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9755,"src":"3048:19:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig memory"}},"id":9764,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3068:20:41","memberName":"priceUpdateThreshold","nodeType":"MemberAccess","referencedDeclaration":9717,"src":"3048:40:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"id":9765,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"3092:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3048:61:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20757064617465207468726573686f6c6420746f6f2068696768","id":9767,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3111:32:41","typeDescriptions":{"typeIdentifier":"t_stringliteral_8a566cb33a697901d095335b5e9f970dfcd1d1aec6492c3e3a0bddbf42e69563","typeString":"literal_string \"TPM: update threshold too high\""},"value":"TPM: update threshold too high"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_8a566cb33a697901d095335b5e9f970dfcd1d1aec6492c3e3a0bddbf42e69563","typeString":"literal_string \"TPM: update threshold too high\""}],"id":9762,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3040:7:41","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":9768,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3040:104:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9769,"nodeType":"ExpressionStatement","src":"3040:104:41"},{"expression":{"id":9780,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9770,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9730,"src":"3154:23:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9778,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":9773,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3188:2:41","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"id":9774,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"3194:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9775,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3213:11:41","memberName":"tokenOracle","nodeType":"MemberAccess","referencedDeclaration":9701,"src":"3194:30:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"id":9776,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3225:8:41","memberName":"decimals","nodeType":"MemberAccess","referencedDeclaration":9662,"src":"3194:39:41","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint8_$","typeString":"function () view external returns (uint8)"}},"id":9777,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3194:41:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"3188:47:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9772,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3180:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":9771,"name":"uint128","nodeType":"ElementaryTypeName","src":"3180:7:41","typeDescriptions":{}}},"id":9779,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3180:56:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"3154:82:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9781,"nodeType":"ExpressionStatement","src":"3154:82:41"},{"condition":{"expression":{"id":9782,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"3250:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9783,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3269:19:41","memberName":"tokenToNativeOracle","nodeType":"MemberAccess","referencedDeclaration":9708,"src":"3250:38:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":9815,"nodeType":"Block","src":"3461:109:41","statements":[{"expression":{"id":9813,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9803,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9733,"src":"3475:24:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9811,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":9806,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3510:2:41","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"id":9807,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"3516:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9808,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3535:12:41","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":9705,"src":"3516:31:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"id":9809,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3548:8:41","memberName":"decimals","nodeType":"MemberAccess","referencedDeclaration":9662,"src":"3516:40:41","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint8_$","typeString":"function () view external returns (uint8)"}},"id":9810,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3516:42:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"3510:48:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9805,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3502:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_uint128_$","typeString":"type(uint128)"},"typeName":{"id":9804,"name":"uint128","nodeType":"ElementaryTypeName","src":"3502:7:41","typeDescriptions":{}}},"id":9812,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3502:57:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"3475:84:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9814,"nodeType":"ExpressionStatement","src":"3475:84:41"}]},"id":9816,"nodeType":"IfStatement","src":"3246:324:41","trueBody":{"id":9802,"nodeType":"Block","src":"3290:165:41","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":9794,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"expression":{"id":9787,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"3320:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9788,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3339:12:41","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":9705,"src":"3320:31:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}],"id":9786,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3312:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":9785,"name":"address","nodeType":"ElementaryTypeName","src":"3312:7:41","typeDescriptions":{}}},"id":9789,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3312:40:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":9792,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3364:1:41","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":9791,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3356:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":9790,"name":"address","nodeType":"ElementaryTypeName","src":"3356:7:41","typeDescriptions":{}}},"id":9793,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3356:10:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3312:54:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a206e6174697665206f7261636c65206d757374206265207a65726f","id":9795,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3368:33:41","typeDescriptions":{"typeIdentifier":"t_stringliteral_5c9a726e30dc2076d99e7de38a287cb3806293b04e29f1362f7c34718468e7d1","typeString":"literal_string \"TPM: native oracle must be zero\""},"value":"TPM: native oracle must be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5c9a726e30dc2076d99e7de38a287cb3806293b04e29f1362f7c34718468e7d1","typeString":"literal_string \"TPM: native oracle must be zero\""}],"id":9784,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"3304:7:41","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":9796,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3304:98:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9797,"nodeType":"ExpressionStatement","src":"3304:98:41"},{"expression":{"id":9800,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9798,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9733,"src":"3416:24:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"31","id":9799,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3443:1:41","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3416:28:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9801,"nodeType":"ExpressionStatement","src":"3416:28:41"}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"_setOracleConfiguration","nameLocation":"2887:23:41","parameters":{"id":9756,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9755,"mutability":"mutable","name":"_oracleHelperConfig","nameLocation":"2946:19:41","nodeType":"VariableDeclaration","scope":9818,"src":"2920:45:41","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_memory_ptr","typeString":"struct OracleHelper.OracleHelperConfig"},"typeName":{"id":9754,"nodeType":"UserDefinedTypeName","pathNode":{"id":9753,"name":"OracleHelperConfig","nameLocations":["2920:18:41"],"nodeType":"IdentifierPath","referencedDeclaration":9718,"src":"2920:18:41"},"referencedDeclaration":9718,"src":"2920:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage_ptr","typeString":"struct OracleHelper.OracleHelperConfig"}},"visibility":"internal"}],"src":"2910:61:41"},"returnParameters":{"id":9757,"nodeType":"ParameterList","parameters":[],"src":"2980:0:41"},"scope":10058,"stateMutability":"nonpayable","virtual":false,"visibility":"private"},{"id":9952,"nodeType":"FunctionDefinition","src":"3851:1613:41","nodes":[],"body":{"id":9951,"nodeType":"Block","src":"3915:1549:41","nodes":[],"statements":[{"assignments":[9827],"declarations":[{"constant":false,"id":9827,"mutability":"mutable","name":"cacheTimeToLive","nameLocation":"3933:15:41","nodeType":"VariableDeclaration","scope":9951,"src":"3925:23:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9826,"name":"uint256","nodeType":"ElementaryTypeName","src":"3925:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9830,"initialValue":{"expression":{"id":9828,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"3951:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9829,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3970:15:41","memberName":"cacheTimeToLive","nodeType":"MemberAccess","referencedDeclaration":9694,"src":"3951:34:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"nodeType":"VariableDeclarationStatement","src":"3925:60:41"},{"assignments":[9832],"declarations":[{"constant":false,"id":9832,"mutability":"mutable","name":"cacheAge","nameLocation":"4003:8:41","nodeType":"VariableDeclaration","scope":9951,"src":"3995:16:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9831,"name":"uint256","nodeType":"ElementaryTypeName","src":"3995:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9837,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9836,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":9833,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4014:5:41","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":9834,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4020:9:41","memberName":"timestamp","nodeType":"MemberAccess","src":"4014:15:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":9835,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9724,"src":"4032:20:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"4014:38:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3995:57:41"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":9843,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9839,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4066:6:41","subExpression":{"id":9838,"name":"force","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9821,"src":"4067:5:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9842,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9840,"name":"cacheAge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9832,"src":"4076:8:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"id":9841,"name":"cacheTimeToLive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9827,"src":"4088:15:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4076:27:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4066:37:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9847,"nodeType":"IfStatement","src":"4062:86:41","trueBody":{"id":9846,"nodeType":"Block","src":"4105:43:41","statements":[{"expression":{"id":9844,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9721,"src":"4126:11:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9825,"id":9845,"nodeType":"Return","src":"4119:18:41"}]}},{"assignments":[9849],"declarations":[{"constant":false,"id":9849,"mutability":"mutable","name":"priceUpdateThreshold","nameLocation":"4165:20:41","nodeType":"VariableDeclaration","scope":9951,"src":"4157:28:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9848,"name":"uint256","nodeType":"ElementaryTypeName","src":"4157:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9852,"initialValue":{"expression":{"id":9850,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4188:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9851,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4207:20:41","memberName":"priceUpdateThreshold","nodeType":"MemberAccess","referencedDeclaration":9717,"src":"4188:39:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4157:70:41"},{"assignments":[9855],"declarations":[{"constant":false,"id":9855,"mutability":"mutable","name":"tokenOracle","nameLocation":"4245:11:41","nodeType":"VariableDeclaration","scope":9951,"src":"4237:19:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"},"typeName":{"id":9854,"nodeType":"UserDefinedTypeName","pathNode":{"id":9853,"name":"IOracle","nameLocations":["4237:7:41"],"nodeType":"IdentifierPath","referencedDeclaration":9676,"src":"4237:7:41"},"referencedDeclaration":9676,"src":"4237:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"visibility":"internal"}],"id":9858,"initialValue":{"expression":{"id":9856,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4259:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9857,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4278:11:41","memberName":"tokenOracle","nodeType":"MemberAccess","referencedDeclaration":9701,"src":"4259:30:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"nodeType":"VariableDeclarationStatement","src":"4237:52:41"},{"assignments":[9861],"declarations":[{"constant":false,"id":9861,"mutability":"mutable","name":"nativeOracle","nameLocation":"4307:12:41","nodeType":"VariableDeclaration","scope":9951,"src":"4299:20:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"},"typeName":{"id":9860,"nodeType":"UserDefinedTypeName","pathNode":{"id":9859,"name":"IOracle","nameLocations":["4299:7:41"],"nodeType":"IdentifierPath","referencedDeclaration":9676,"src":"4299:7:41"},"referencedDeclaration":9676,"src":"4299:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"visibility":"internal"}],"id":9864,"initialValue":{"expression":{"id":9862,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4322:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9863,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4341:12:41","memberName":"nativeOracle","nodeType":"MemberAccess","referencedDeclaration":9705,"src":"4322:31:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"nodeType":"VariableDeclarationStatement","src":"4299:54:41"},{"assignments":[9866],"declarations":[{"constant":false,"id":9866,"mutability":"mutable","name":"_cachedPrice","nameLocation":"4372:12:41","nodeType":"VariableDeclaration","scope":9951,"src":"4364:20:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9865,"name":"uint256","nodeType":"ElementaryTypeName","src":"4364:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9868,"initialValue":{"id":9867,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9721,"src":"4387:11:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4364:34:41"},{"assignments":[9870],"declarations":[{"constant":false,"id":9870,"mutability":"mutable","name":"tokenPrice","nameLocation":"4416:10:41","nodeType":"VariableDeclaration","scope":9951,"src":"4408:18:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9869,"name":"uint256","nodeType":"ElementaryTypeName","src":"4408:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9874,"initialValue":{"arguments":[{"id":9872,"name":"tokenOracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9855,"src":"4440:11:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}],"id":9871,"name":"fetchPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10057,"src":"4429:10:41","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_IOracle_$9676_$returns$_t_uint256_$","typeString":"function (contract IOracle) view returns (uint256)"}},"id":9873,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4429:23:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4408:44:41"},{"assignments":[9876],"declarations":[{"constant":false,"id":9876,"mutability":"mutable","name":"nativeAssetPrice","nameLocation":"4470:16:41","nodeType":"VariableDeclaration","scope":9951,"src":"4462:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9875,"name":"uint256","nodeType":"ElementaryTypeName","src":"4462:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9878,"initialValue":{"hexValue":"31","id":9877,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4489:1:41","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"nodeType":"VariableDeclarationStatement","src":"4462:28:41"},{"condition":{"id":9881,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"4625:39:41","subExpression":{"expression":{"id":9879,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4626:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9880,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4645:19:41","memberName":"tokenToNativeOracle","nodeType":"MemberAccess","referencedDeclaration":9708,"src":"4626:38:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9889,"nodeType":"IfStatement","src":"4621:113:41","trueBody":{"id":9888,"nodeType":"Block","src":"4666:68:41","statements":[{"expression":{"id":9886,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9882,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9876,"src":"4680:16:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":9884,"name":"nativeOracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9861,"src":"4710:12:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}],"id":9883,"name":"fetchPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10057,"src":"4699:10:41","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_contract$_IOracle_$9676_$returns$_t_uint256_$","typeString":"function (contract IOracle) view returns (uint256)"}},"id":9885,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4699:24:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4680:43:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9887,"nodeType":"ExpressionStatement","src":"4680:43:41"}]}},{"assignments":[9891],"declarations":[{"constant":false,"id":9891,"mutability":"mutable","name":"newPrice","nameLocation":"4751:8:41","nodeType":"VariableDeclaration","scope":9951,"src":"4743:16:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9890,"name":"uint256","nodeType":"ElementaryTypeName","src":"4743:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9900,"initialValue":{"arguments":[{"id":9893,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9870,"src":"4790:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9894,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9876,"src":"4814:16:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9895,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4844:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9896,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4863:18:41","memberName":"tokenOracleReverse","nodeType":"MemberAccess","referencedDeclaration":9711,"src":"4844:37:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"expression":{"id":9897,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"4895:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":9898,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4914:19:41","memberName":"nativeOracleReverse","nodeType":"MemberAccess","referencedDeclaration":9714,"src":"4895:38:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":9892,"name":"calculatePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10003,"src":"4762:14:41","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_bool_$_t_bool_$returns$_t_uint256_$","typeString":"function (uint256,uint256,bool,bool) view returns (uint256)"}},"id":9899,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4762:181:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4743:200:41"},{"assignments":[9902],"declarations":[{"constant":false,"id":9902,"mutability":"mutable","name":"priceRatio","nameLocation":"4961:10:41","nodeType":"VariableDeclaration","scope":9951,"src":"4953:18:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9901,"name":"uint256","nodeType":"ElementaryTypeName","src":"4953:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9908,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9907,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9905,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9903,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"4974:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":9904,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9891,"src":"4994:8:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4974:28:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":9906,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9866,"src":"5005:12:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4974:43:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4953:64:41"},{"assignments":[9910],"declarations":[{"constant":false,"id":9910,"mutability":"mutable","name":"updateRequired","nameLocation":"5032:14:41","nodeType":"VariableDeclaration","scope":9951,"src":"5027:19:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9909,"name":"bool","nodeType":"ElementaryTypeName","src":"5027:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":9924,"initialValue":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":9923,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":9917,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9911,"name":"force","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9821,"src":"5049:5:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9916,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9912,"name":"priceRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9902,"src":"5070:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9913,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"5083:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":9914,"name":"priceUpdateThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9849,"src":"5103:20:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5083:40:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5070:53:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5049:74:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9922,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9918,"name":"priceRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9902,"src":"5139:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9921,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9919,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"5152:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":9920,"name":"priceUpdateThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9849,"src":"5172:20:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5152:40:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5139:53:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5049:143:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"5027:165:41"},{"condition":{"id":9926,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"5206:15:41","subExpression":{"id":9925,"name":"updateRequired","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9910,"src":"5207:14:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9930,"nodeType":"IfStatement","src":"5202:65:41","trueBody":{"id":9929,"nodeType":"Block","src":"5223:44:41","statements":[{"expression":{"id":9927,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9866,"src":"5244:12:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9825,"id":9928,"nodeType":"Return","src":"5237:19:41"}]}},{"expression":{"id":9933,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9931,"name":"cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9721,"src":"5276:11:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":9932,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9891,"src":"5290:8:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5276:22:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9934,"nodeType":"ExpressionStatement","src":"5276:22:41"},{"expression":{"id":9941,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9935,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9724,"src":"5308:20:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"expression":{"id":9938,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5338:5:41","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":9939,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5344:9:41","memberName":"timestamp","nodeType":"MemberAccess","src":"5338:15:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9937,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5331:6:41","typeDescriptions":{"typeIdentifier":"t_type$_t_uint48_$","typeString":"type(uint48)"},"typeName":{"id":9936,"name":"uint48","nodeType":"ElementaryTypeName","src":"5331:6:41","typeDescriptions":{}}},"id":9940,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5331:23:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"5308:46:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"id":9942,"nodeType":"ExpressionStatement","src":"5308:46:41"},{"eventCall":{"arguments":[{"id":9944,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9891,"src":"5387:8:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9945,"name":"_cachedPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9866,"src":"5397:12:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9946,"name":"cachedPriceTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9724,"src":"5411:20:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint48","typeString":"uint48"}],"id":9943,"name":"TokenPriceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9688,"src":"5369:17:41","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256)"}},"id":9947,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5369:63:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9948,"nodeType":"EmitStatement","src":"5364:68:41"},{"expression":{"id":9949,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9891,"src":"5449:8:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9825,"id":9950,"nodeType":"Return","src":"5442:15:41"}]},"documentation":{"id":9819,"nodeType":"StructuredDocumentation","src":"3582:264:41","text":"@notice Updates the token price by fetching the latest price from the Oracle.\n @param force true to force cache update, even if called after short time or the change is lower than the update threshold.\n @return newPrice the new cached token price"},"functionSelector":"3ba9290f","implemented":true,"kind":"function","modifiers":[],"name":"updateCachedPrice","nameLocation":"3860:17:41","parameters":{"id":9822,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9821,"mutability":"mutable","name":"force","nameLocation":"3883:5:41","nodeType":"VariableDeclaration","scope":9952,"src":"3878:10:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9820,"name":"bool","nodeType":"ElementaryTypeName","src":"3878:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3877:12:41"},"returnParameters":{"id":9825,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9824,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":9952,"src":"3906:7:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9823,"name":"uint256","nodeType":"ElementaryTypeName","src":"3906:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3905:9:41"},"scope":10058,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":10003,"nodeType":"FunctionDefinition","src":"6085:1280:41","nodes":[],"body":{"id":10002,"nodeType":"Block","src":"6274:1091:41","nodes":[],"statements":[{"condition":{"id":9966,"name":"tokenOracleReverse","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9959,"src":"6352:18:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":9984,"nodeType":"Block","src":"6572:181:41","statements":[{"expression":{"id":9982,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9976,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"6673:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9981,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9979,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9977,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"6686:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":9978,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"6706:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6686:30:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":9980,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9730,"src":"6719:23:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"6686:56:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6673:69:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9983,"nodeType":"ExpressionStatement","src":"6673:69:41"}]},"id":9985,"nodeType":"IfStatement","src":"6348:405:41","trueBody":{"id":9975,"nodeType":"Block","src":"6372:194:41","statements":[{"expression":{"id":9973,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9967,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"6486:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9972,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9970,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9968,"name":"PRICE_DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9691,"src":"6499:17:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":9969,"name":"tokenOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9730,"src":"6519:23:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"6499:43:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":9971,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"6545:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6499:56:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6486:69:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9974,"nodeType":"ExpressionStatement","src":"6486:69:41"}]}},{"condition":{"id":9986,"name":"nativeOracleReverse","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9961,"src":"6767:19:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":10000,"nodeType":"Block","src":"7078:281:41","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9998,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9996,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9994,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"7292:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":9995,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9733,"src":"7305:24:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"7292:37:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":9997,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9957,"src":"7332:16:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7292:56:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9965,"id":9999,"nodeType":"Return","src":"7285:63:41"}]},"id":10001,"nodeType":"IfStatement","src":"6763:596:41","trueBody":{"id":9993,"nodeType":"Block","src":"6788:284:41","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9991,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9989,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9987,"name":"nativeAssetPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9957,"src":"7005:16:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":9988,"name":"tokenPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9955,"src":"7024:10:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7005:29:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":9990,"name":"nativeOracleDecimalPower","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9733,"src":"7037:24:41","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"7005:56:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9965,"id":9992,"nodeType":"Return","src":"6998:63:41"}]}}]},"documentation":{"id":9953,"nodeType":"StructuredDocumentation","src":"5470:610:41","text":" Calculate the effective price of the selected token denominated in native asset.\n @param tokenPrice - the price of the token relative to a native asset or a bridging asset like the U.S. dollar.\n @param nativeAssetPrice - the price of the native asset relative to a bridging asset or 1 if no bridging needed.\n @param tokenOracleReverse - flag indicating direction of the \"tokenPrice\".\n @param nativeOracleReverse - flag indicating direction of the \"nativeAssetPrice\".\n @return the native-asset-per-token price multiplied by the PRICE_DENOMINATOR constant."},"implemented":true,"kind":"function","modifiers":[],"name":"calculatePrice","nameLocation":"6094:14:41","parameters":{"id":9962,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9955,"mutability":"mutable","name":"tokenPrice","nameLocation":"6126:10:41","nodeType":"VariableDeclaration","scope":10003,"src":"6118:18:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9954,"name":"uint256","nodeType":"ElementaryTypeName","src":"6118:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9957,"mutability":"mutable","name":"nativeAssetPrice","nameLocation":"6154:16:41","nodeType":"VariableDeclaration","scope":10003,"src":"6146:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9956,"name":"uint256","nodeType":"ElementaryTypeName","src":"6146:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9959,"mutability":"mutable","name":"tokenOracleReverse","nameLocation":"6185:18:41","nodeType":"VariableDeclaration","scope":10003,"src":"6180:23:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9958,"name":"bool","nodeType":"ElementaryTypeName","src":"6180:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":9961,"mutability":"mutable","name":"nativeOracleReverse","nameLocation":"6218:19:41","nodeType":"VariableDeclaration","scope":10003,"src":"6213:24:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9960,"name":"bool","nodeType":"ElementaryTypeName","src":"6213:4:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"6108:135:41"},"returnParameters":{"id":9965,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9964,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10003,"src":"6266:7:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9963,"name":"uint256","nodeType":"ElementaryTypeName","src":"6266:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6265:9:41"},"scope":10058,"stateMutability":"view","virtual":false,"visibility":"private"},{"id":10057,"nodeType":"FunctionDefinition","src":"7664:462:41","nodes":[],"body":{"id":10056,"nodeType":"Block","src":"7739:387:41","nodes":[],"statements":[{"assignments":[10013,10015,null,10017,10019],"declarations":[{"constant":false,"id":10013,"mutability":"mutable","name":"roundId","nameLocation":"7757:7:41","nodeType":"VariableDeclaration","scope":10056,"src":"7750:14:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"},"typeName":{"id":10012,"name":"uint80","nodeType":"ElementaryTypeName","src":"7750:6:41","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"visibility":"internal"},{"constant":false,"id":10015,"mutability":"mutable","name":"answer","nameLocation":"7773:6:41","nodeType":"VariableDeclaration","scope":10056,"src":"7766:13:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10014,"name":"int256","nodeType":"ElementaryTypeName","src":"7766:6:41","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},null,{"constant":false,"id":10017,"mutability":"mutable","name":"updatedAt","nameLocation":"7790:9:41","nodeType":"VariableDeclaration","scope":10056,"src":"7782:17:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10016,"name":"uint256","nodeType":"ElementaryTypeName","src":"7782:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10019,"mutability":"mutable","name":"answeredInRound","nameLocation":"7808:15:41","nodeType":"VariableDeclaration","scope":10056,"src":"7801:22:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"},"typeName":{"id":10018,"name":"uint80","nodeType":"ElementaryTypeName","src":"7801:6:41","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"visibility":"internal"}],"id":10023,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10020,"name":"_oracle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10007,"src":"7827:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"id":10021,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7835:15:41","memberName":"latestRoundData","nodeType":"MemberAccess","referencedDeclaration":9675,"src":"7827:23:41","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$","typeString":"function () view external returns (uint80,int256,uint256,uint256,uint80)"}},"id":10022,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7827:25:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint80_$_t_int256_$_t_uint256_$_t_uint256_$_t_uint80_$","typeString":"tuple(uint80,int256,uint256,uint256,uint80)"}},"nodeType":"VariableDeclarationStatement","src":"7749:103:41"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":10027,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10025,"name":"answer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10015,"src":"7870:6:41","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":10026,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7879:1:41","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7870:10:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20436861696e6c696e6b207072696365203c3d2030","id":10028,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7882:27:41","typeDescriptions":{"typeIdentifier":"t_stringliteral_230841b91566b8ef8494467ac1066600e239c03fbb1726ac05edb7eb6426bf5f","typeString":"literal_string \"TPM: Chainlink price <= 0\""},"value":"TPM: Chainlink price <= 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_230841b91566b8ef8494467ac1066600e239c03fbb1726ac05edb7eb6426bf5f","typeString":"literal_string \"TPM: Chainlink price <= 0\""}],"id":10024,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7862:7:41","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":10029,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7862:48:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10030,"nodeType":"ExpressionStatement","src":"7862:48:41"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10038,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10032,"name":"updatedAt","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10017,"src":"7928:9:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10037,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":10033,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"7941:5:41","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":10034,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7947:9:41","memberName":"timestamp","nodeType":"MemberAccess","src":"7941:15:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":10035,"name":"oracleHelperConfig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9727,"src":"7959:18:41","typeDescriptions":{"typeIdentifier":"t_struct$_OracleHelperConfig_$9718_storage","typeString":"struct OracleHelper.OracleHelperConfig storage ref"}},"id":10036,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"7978:17:41","memberName":"maxOracleRoundAge","nodeType":"MemberAccess","referencedDeclaration":9697,"src":"7959:36:41","typeDescriptions":{"typeIdentifier":"t_uint48","typeString":"uint48"}},"src":"7941:54:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7928:67:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a20496e636f6d706c65746520726f756e64","id":10039,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"7997:23:41","typeDescriptions":{"typeIdentifier":"t_stringliteral_734b18f0d91ef88524431e4a4badc94fe5958912efef3c7a4b031041665230f8","typeString":"literal_string \"TPM: Incomplete round\""},"value":"TPM: Incomplete round"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_734b18f0d91ef88524431e4a4badc94fe5958912efef3c7a4b031041665230f8","typeString":"literal_string \"TPM: Incomplete round\""}],"id":10031,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7920:7:41","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":10040,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7920:101:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10041,"nodeType":"ExpressionStatement","src":"7920:101:41"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint80","typeString":"uint80"},"id":10045,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10043,"name":"answeredInRound","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10019,"src":"8039:15:41","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":10044,"name":"roundId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10013,"src":"8058:7:41","typeDescriptions":{"typeIdentifier":"t_uint80","typeString":"uint80"}},"src":"8039:26:41","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"54504d3a205374616c65207072696365","id":10046,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"8067:18:41","typeDescriptions":{"typeIdentifier":"t_stringliteral_ff3d7b84e0669faa595987a28f54ed7b7d788d6b153fece7f34e88484bde9567","typeString":"literal_string \"TPM: Stale price\""},"value":"TPM: Stale price"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_ff3d7b84e0669faa595987a28f54ed7b7d788d6b153fece7f34e88484bde9567","typeString":"literal_string \"TPM: Stale price\""}],"id":10042,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"8031:7:41","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":10047,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8031:55:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10048,"nodeType":"ExpressionStatement","src":"8031:55:41"},{"expression":{"id":10054,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10049,"name":"price","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10010,"src":"8096:5:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10052,"name":"answer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10015,"src":"8112:6:41","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":10051,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8104:7:41","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":10050,"name":"uint256","nodeType":"ElementaryTypeName","src":"8104:7:41","typeDescriptions":{}}},"id":10053,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8104:15:41","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8096:23:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10055,"nodeType":"ExpressionStatement","src":"8096:23:41"}]},"documentation":{"id":10004,"nodeType":"StructuredDocumentation","src":"7371:288:41","text":"@notice Fetches the latest price from the given Oracle.\n @dev This function is used to get the latest price from the tokenOracle or nativeOracle.\n @param _oracle The Oracle contract to fetch the price from.\n @return price The latest price fetched from the Oracle."},"implemented":true,"kind":"function","modifiers":[],"name":"fetchPrice","nameLocation":"7673:10:41","parameters":{"id":10008,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10007,"mutability":"mutable","name":"_oracle","nameLocation":"7692:7:41","nodeType":"VariableDeclaration","scope":10057,"src":"7684:15:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"},"typeName":{"id":10006,"nodeType":"UserDefinedTypeName","pathNode":{"id":10005,"name":"IOracle","nameLocations":["7684:7:41"],"nodeType":"IdentifierPath","referencedDeclaration":9676,"src":"7684:7:41"},"referencedDeclaration":9676,"src":"7684:7:41","typeDescriptions":{"typeIdentifier":"t_contract$_IOracle_$9676","typeString":"contract IOracle"}},"visibility":"internal"}],"src":"7683:17:41"},"returnParameters":{"id":10011,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10010,"mutability":"mutable","name":"price","nameLocation":"7732:5:41","nodeType":"VariableDeclaration","scope":10057,"src":"7724:13:41","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10009,"name":"uint256","nodeType":"ElementaryTypeName","src":"7724:7:41","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7723:15:41"},"scope":10058,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":true,"baseContracts":[],"canonicalName":"OracleHelper","contractDependencies":[],"contractKind":"contract","documentation":{"id":9680,"nodeType":"StructuredDocumentation","src":"127:424:41","text":"@title Helper functions for dealing with various forms of price feed oracles.\n @notice Maintains a price cache and updates the current price if needed.\n In the best case scenario we have a direct oracle from the token to the native asset.\n Also support tokens that have no direct price oracle to the native asset.\n Sometimes oracles provide the price in the opposite direction of what we need in the moment."},"fullyImplemented":true,"linearizedBaseContracts":[10058],"name":"OracleHelper","nameLocation":"569:12:41","scope":10059,"usedErrors":[],"usedEvents":[9688]}],"license":"GPL-3.0"},"id":41}